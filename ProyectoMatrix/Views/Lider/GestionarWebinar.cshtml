@model IEnumerable<ProyectoMatrix.Models.WebinarListItemVm>
@{
    ViewData["Title"] = "Gestionar Webinars";
    Layout = "~/Views/Shared/_LayoutComunicados.cshtml";
}
<link href="~/css/StylesLiderGestionar.css" rel="stylesheet" />
<div class="webinars-admin">
<h2 class="mb-3">Gestionar Webinars</h2>

<div class="d-flex gap-2 mb-3">
    <a class="btn btn-success" asp-controller="Lider" asp-action="CrearWebinar">➕ Agregar webinar</a>
  <a class="btn btn-secondary" asp-controller="Lider" asp-action="Index">⬅️ Volver</a>
</div>

@if (!(Model?.Any() ?? false))
{
    <div class="alert alert-info">Aún no has creado webinars.</div>
}
else
{
   <div class="table-responsive">
        <table class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Inicio</th>
             <th>Fin</th>
                    <th>Público</th>
                    <th>Dirigido a</th>
                    <th>Teams</th>
              <th style="width:180px;"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var w in Model)
                {
                    <tr>
                        <td>
                        <div class="fw-semibold">@w.Titulo</div>
                            @* opcional: muestra ruta/preview *@
                            @if (!string.IsNullOrWhiteSpace(w.Imagen))
                            {
                                <small class="text-muted">Imagen: @w.Imagen</small>
                            }
                        </td>
                        <td>@w.FechaInicio.ToString("dd/MM/yyyy HH:mm")</td>
                        <td>@w.FechaFin.ToString("dd/MM/yyyy HH:mm")</td>
                     <td>@(w.DirigidoA == "Todas" ? "Sí" : "No")</td>
                        <td>@w.DirigidoA</td>
                        <td>
                            @if (!string.IsNullOrWhiteSpace(w.UrlTeams))
                      {
                                <a href="@w.UrlTeams" target="_blank" class="btn btn-outline-primary btn-sm">Abrir</a>
                            }
                            else
                            {

                                <span class="text-muted">—</span>
                            }
                        </td>
                        <td>@(string.IsNullOrWhiteSpace(w.DirigidoA) ? "-" : w.DirigidoA)</td>
                        <td class="text-nowrap">
                            <a asp-action="Editar" asp-route-id="@w.WebinarID" class="btn btn-sm btn-outline-primary me-1">
                                Editar
                            </a>
                            <form asp-action="Eliminar" method="post" class="d-inline"
                                  onsubmit="return confirm('¿Está seguro de que desea eliminar el comunicado @w.Titulo ?');">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@w.WebinarID" />
                                <button type="submit" class="btn btn-sm btn-outline-danger">
                                    Eliminar
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
   
}
</div>