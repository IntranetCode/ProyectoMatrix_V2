@* Overlay global *@
<div id="app-overlay" class="app-overlay is-hidden" aria-hidden="true" aria-live="polite">
    <img src="@Url.Content("~/Imagenes/overlay.gif")" alt="Cargando…" />
    <p>Cargando…</p>
</div>


<style>
    .app-overlay {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,0.9);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity .25s ease;
    }

        .app-overlay.is-hidden {
            opacity: 0;
            pointer-events: none;
        }

        .app-overlay img {
            max-width: 150px;
            max-height: 150px;
            object-fit: contain;
            image-rendering: crisp-edges;
        }

        .app-overlay p {
            margin-top: 12px;
            font-size: 1.05rem;
            font-weight: 500;
            color: #2c3e50;
        }

</style>

<script>
                (function () {
      const overlay = document.getElementById('app-overlay');
      if (!overlay) return;

      const show = () => overlay.classList.remove('is-hidden');
      const hide = () => overlay.classList.add('is-hidden');

      // Exponer por si quieres usarlo manualmente
      window.AppOverlay = { show, hide };

      // Mostrar overlay al hacer clic en:
      //  - tarjetas tipo .action-card[data-href]
      //  - cualquier elemento con [data-overlay-trigger]
      document.addEventListener('click', function (e) {
        const trigger = e.target.closest('.action-card[data-href], [data-overlay-trigger]');
        if (!trigger) return;

        // Ignorar nuevas pestañas/descargas/modificadores
        if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.button !== 0) return;
        if (trigger.tagName && trigger.tagName.toLowerCase() === 'a') {
          if (trigger.target === '_blank' || trigger.hasAttribute('download')) return;
          const href = trigger.getAttribute('href');
          if (!href || href.startsWith('#')) return;
        }

        show();
      }, true);

      // Si la página vuelve desde el BFCache, ocultar overlay
      window.addEventListener('pageshow', (evt) => { if (evt.persisted) hide(); });
    })();

</script>



